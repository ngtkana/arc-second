### ARC 091 C - Flip,Flip, and Flip......

縦横 $2$ マス以上の場合は、$(h - 2) (w - 2)$ です。どちらかが $1$ のときには場合分けをしましょう。


### ARC 091 D - Remainder Reminder

まず $K = 0$ のときを例外だと思うことで、$A$ の範囲を $0$ 以上にすることができます。

$B$ を $[ K + 1, N ]$ の範囲で全探索です。$A$ が $\left [0, B \cdot \lfloor \frac { N } { B } \rfloor \right [$ に入っているときの個数と、そうでない個数を分けてカウントすると良いです。


### ARC 091 E - LISDL

まず増加列と減少列の交叉は $1$ 以下ですから、$N$ は $A + B - 1$ 以上でないといけません。ピッタリのものは、への字型でできます。

一方、$N$ の大きそうなものとしては、$N = A B$ で、$\{ 0, 1, \dots, N - 1 \}$を考えて長さ $B$ ごとに chunking をして chunk ごとに reverse したものがあります。見た目的には、$A \times B$ の長方形をちょっと回転した感じに見えると思います。実はこれが $N$ の最大であることが、鳩の巣原理からわかります。

ではその中間くらいはどのように作るのかというと、長方形のちょっと欠けた感じのものを作るとよいです。実装ガチャの振り方によっては結構難しくなるかもしれないのですが、簡単なやり方としては、すべての chunk の size が $1$ 以上 $B$ 以下になるように $A$ 個に chunking しておいて、各 chunk を reverse すると同じように作れます。この chunking の構成なのですが、$(0, B, 2B, \dots, AB)$ と $(N - A, N - A + 1, \dots, N)$ の項別最小を取るのが楽だと思います。


#### 学び

$\mathtt { iota } + \mathtt { reverse }$ で書けるときには積極的に採用すると、実装が楽になりがちです。ARC 095 F - Permutation Tree もそうでしたね。

[F - Permutation Tree](https://atcoder.jp/contests/arc095/tasks/arc095_d)


#### ちなみに

この結果には Erdős–Szekeres というお名前がついています。

[Erdős–Szekeres theorem - Wikipedia](https://en.wikipedia.org/wiki/Erd%C5%91s%E2%80%93Szekeres_theorem)


### ARC 091 F - Strange Nim

Grundy 数を高速に計算しましょう。

$K = 3$ くらいで実験してみると、エスパーができます。
といいますか、計算しているときの自分の思考を追跡すると性質に気づきます。

$A$ から遷移できる最も小さい状態は $A - \lfloor \frac { A } { K } \rfloor$ です。これを $f ( A )$ と置きましょう。

- $A$ が $K$ の倍数のとき、Grundy 数は $A / K$ です。
- そうでないとき、$f(A) - 1$ の Grundy 数と等しいです。（エスパー方法：到達可能な区間がちょうどスライドして、$f(A) - 1$ のところがぴったり抜けます。）


#### 解説放送を観て

りんごさん「こういうのは、問題文を読み終えた時点で、考え出しては絶対にだめで、見た瞬間に、実験するしか、ないというタイプの、問題なのでまず、まっさきに、まっさきに Grundy 数を計算し始めてください。」

とても心強いお言葉です。

解説放送では $K = 2$ を実験しているようですね。


#### 有益なアドバイス

解説放送でもさらっと言及されているのですが、Grundy 数というのはなにも、ゲーム木を DFS して $\mathtt{ mex }$ で計算するという過程を踏む必要はありません。むしろ、そのアルゴリズム自体からなにか有益なことがわかるほうが稀だと思います。（本質的にはなにもかわらないのですが）実際には、Grundy 数は各点で $\mathtt { mex }$ 条件を満たすという特徴付けがありますという捉え方のほうが強い印象です。というのも、具体的には「エスパーして証明」がとても楽です。たとえば負けるが勝ち Nim の勝敗もこの観点で考えるとけっこう簡単です。

案外これに気づいていない方が多いかなと思うのと、私もはじめ気づかずにアルゴリムばかり眺めていましたから、せっかくですからみなさまの糧にとおもい、筆を運ばせていただきました。

