## ARC 089 C - Traveling

移動時間が間に合って、かつ偶奇があえばよいです。


## ARC 089 D - Checker

市松模様が固定されているときに点数を数える方法を考えましょう。`'B'` が黒マスのときには $+1$ 点、`'W'` が白マスのときには $-1$ 点です。これでは定数個ずれます。`'W'` の個数は予め加点しておきましょう。

さて、各文字を、$(i, j)$ からこの集合に分身して、黒い正方形を一つだけにしても答えが変わりません。あとは黒い正方形の位置を、$[0, k[ \times [0, 2 \times k[$ の範囲で全探索すると良いです。文字の得点は、予め $[0, 2 k [ \times [ 0, 3 k [$ の範囲で累積和をとっておくと良いです。
$$
(i + 2 k + \mathbb Z) \times (j + 2 k + \mathbb Z)
\cup
(i + k + 2 k + \mathbb Z) \times (j + k + 2 k + \mathbb Z)
$$

### さらに高速に

$[0, k[ \times [0, 2 k [$ を探索する代わりに、$[0, k[ \times [0, k[$ を探索して最大と最小を両方とも計算し、全体から最小を引いたものを最大に算入すると速いです。すると、累積和の範囲も $[0, 2k[ \times [0, 2k[$ でよいです。


## ARC 089 E - GraphXY

`X` を $k$ 回、`Y` を $l$ 回通ってゴールするときの、数字が書いてある辺の重みだけを考えたときの最短経路長を $r _ {k, l}$ とおくと、与えられた $d _ { i, j }$ は次のようにかける必要があります。
$$
    d _ { i , j } = \min _ { k, l } \left ( i k + j l + r _ { k, l } \right ).
$$

これを満たすように $r _ { k, l }$ を決めていきましょう。各 $i, j$ に対して、$k, l, r$ を
$$
    \begin{array}{c}
        d _ { i, j }  = i k + j l + r, \\
        d _ { i ', j ' } \le i ' k + j ' l + r
    \end{array}
$$
を満たすように取ればよいです。これが取れなければ `"Impossible"` です。

これが取れた場合は、このような経路しかないようにグラフを作ればよいです。私がはじめに思いついたのはこうです。これの適切な頂点からゴールに辺を貼っていきます。なのですが、これでは頂点が $10000$ 個くらい必要になってしまい、出力制約に反します。

``` dot
digraph G {
    "(0, 0)" -> "(0, 1)" [label = "X"]
    "(0, 1)" -> "(0, 2)" [label = "X"]
    "(1, 0)" -> "(1, 1)" [label = "X"]
    "(1, 1)" -> "(1, 2)" [label = "X"]
    "(2, 0)" -> "(2, 1)" [label = "X"]
    "(2, 1)" -> "(2, 2)" [label = "X"]
    "(0, 0)" -> "(1, 0)" [label = "Y"]
    "(1, 0)" -> "(2, 0)" [label = "Y"]
    "(0, 1)" -> "(1, 1)" [label = "Y"]
    "(1, 1)" -> "(2, 1)" [label = "Y"]
    "(0, 2)" -> "(1, 2)" [label = "Y"]
    "(1, 2)" -> "(2, 2)" [label = "Y"]
}
```

### 解説 PDF を読んで

こうです。スタート側とゴール側で協力することで、網をはらなくてもよいということですね。これくらいは思いつきたかったところでです。網の構成で無駄を省いてなんとか $300$ に収められないかと試行錯誤をしていました。

``` dot
digraph G {
    "X0" -> "X1" [label = "X"]
    "X1" -> "X2" [label = "X"]
    "Y2" -> "Y1" [label = "Y"]
    "Y1" -> "Y0" [label = "Y"]
}
```

### 解説放送を聴いて

$(i, j)$ ごとに $(k, l)$ を探索するのではなく、$(k, l)$ は全部使うことにして $r$ を最小化するとよいです。


## ARC 089 F - ColoringBalls

TODO: 解けていません。

まず最終形が与えられたとして、どのような文字列ならばそれが塗れるかを考えます。 白マスで分けて別々に考えたときのそれぞれの文字列をマージした形ですから、白マスのない形で考えましょう。また、空の区間を選ぶことでいくらでも長い文字列を使うことができますから、空の区間は選ばないことにしましょう。

すると一手目は必ず赤です。すべてのマスが赤のときにはこれで操作完了です。青いマスが存在するときには青い連結成分の個数を数えましょう。いずれにしても二手目は青です。あとは、青でも赤でも良いので連結成分の個数 - 1 回の操作をすると達成することができます。

まとめると、正規表現でこのようになります。

- 赤オンリー: `r`
- 青い連結成分が $k$ 個: `rb[rb]{k-1}`

さらに白マスで切ったのも戻すと、これらにマッチする文字列をマージしたものを連結とは限らない部分列に持つことが $s$ の条件です。

あとはなんとかします。（わからずです……）
